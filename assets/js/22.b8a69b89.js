(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{529:function(s,n,t){"use strict";t.r(n);var e=t(6),a=Object(e.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"github-action-的概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#github-action-的概念"}},[s._v("#")]),s._v(" GitHub Action 的概念")]),s._v(" "),t("p",[s._v("Github action 可以帮助我们完成持续集成（CI）和持续部署（CD）。你可以自定义工作流程，而且你还可以引用"),t("a",{attrs:{href:"https://github.com/marketplace?type=actions",target:"_blank",rel:"noopener noreferrer"}},[s._v("github action"),t("OutboundLink")],1),s._v(" 市场里面其他人提交的action。可以先熟悉下以下概念：")]),s._v(" "),t("ul",[t("li",[s._v("Workflow: 工作流可以让你在GitHub 上完成构建，测试，打包，发布或部署任意项目。工作流由一个或者多个job组成。workflow file 文件放在.github/workflows这个目录下面。")]),s._v(" "),t("li",[s._v("job: 工作流由一个或者多个job组成，还可以在工作流中定义job的依赖顺序。")]),s._v(" "),t("li",[s._v("Step: 是一个单独的步骤，可以是执行某一个run 命令，或者一个action。一个job里面可以包含多个step。")]),s._v(" "),t("li",[s._v("action: 是工作流中最小的可移植模块，action 可以在社区共享。action需要step里面去执行。")])]),s._v(" "),t("h1",{attrs:{id:"workflow-file-文件介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#workflow-file-文件介绍"}},[s._v("#")]),s._v(" workflow file 文件介绍")]),s._v(" "),t("p",[s._v("workflow file 文件放在.github/workflows这个目录下面。workflow 文件以"),t("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/07/yaml.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("YAML格式"),t("OutboundLink")],1),s._v(",")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("name 是workflow的名称")])]),s._v(" "),t("li",[t("p",[s._v("on: push 是触发条件，在推送的时候触发，还可以指定分支")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("on:\n  push:\n    branches:\n      - master\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("runs-on: 是依赖虚拟环境runner")])])]),s._v(" "),t("h2",{attrs:{id:"workflow-文件示例-发布vuepress-博客到github-page"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#workflow-文件示例-发布vuepress-博客到github-page"}},[s._v("#")]),s._v(" workflow 文件示例，发布vuepress 博客到github page.")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("name: Deploy GitHub Pages\n\n# 触发条件：在 push 到 master 分支后\non:\n  push:\n    branches:\n      - master\n\n# 任务\njobs:\n  build-and-deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n        with:\n          persist-credentials: false\n\n      - name: install\n        run: yarn install \n\n      - name: Build\n        run:  yarn build\n\n      - name: Deploy\n        uses: JamesIves/github-pages-deploy-action@releases/v3\n        with:\n          ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}\n          REPOSITORY_NAME: aaronTang98/aaronTang98.github.io\n          BRANCH: master\n          FOLDER: public\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br")])]),t("ul",[t("li",[s._v("上面yml的含义是")]),s._v(" "),t("li",[s._v("第一步拉取代码")]),s._v(" "),t("li",[s._v("第二步 安装")]),s._v(" "),t("li",[s._v("第三步 编译")]),s._v(" "),t("li",[s._v("第四步 发送到github page的工程和目录")])]),s._v(" "),t("h2",{attrs:{id:"secret-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#secret-配置"}},[s._v("#")]),s._v(" secret 配置")]),s._v(" "),t("p",[s._v("这个示例需要将构建成果发到 GitHub 仓库，因此需要 GitHub 密钥。按照"),t("a",{attrs:{href:"https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),t("OutboundLink")],1),s._v("，生成一个密钥。然后，将这个密钥储存到当前仓库的"),t("code",[s._v("Settings/Secrets")]),s._v("里面。")]),s._v(" "),t("p",[s._v("上面的配置中引入了变量secrets.ACCESS_TOKEN，这个可以在repository里面选择settings。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/aaronTang98/image_store/blog/githubAction.png",alt:"githubAction"}})]),s._v(" "),t("ol",[t("li",[s._v("在左边的菜单选择 "),t("strong",[s._v("Secrets")]),s._v(".")]),s._v(" "),t("li",[s._v("点击添加一个新的 "),t("strong",[s._v("secret")]),s._v(".")]),s._v(" "),t("li",[s._v("输入secret的"),t("strong",[s._v("名字")]),s._v("，例如：ACCESS_TOKEN")]),s._v(" "),t("li",[s._v("输入secret的"),t("strong",[s._v("值")])]),s._v(" "),t("li",[s._v("点击"),t("strong",[s._v("Add secret")]),s._v(".")])])])}),[],!1,null,null,null);n.default=a.exports}}]);