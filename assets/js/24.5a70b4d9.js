(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{531:function(s,e,a){"use strict";a.r(e);var r=a(6),n=Object(r.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_1-安装的先决条件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装的先决条件"}},[s._v("#")]),s._v(" 1.安装的先决条件")]),s._v(" "),a("p",[s._v("Docker Compose依赖Docker Engine进行工作，因此请确保根据您的设置在本地或远程安装Docker Engine。")]),s._v(" "),a("p",[s._v("在Mac和Windows的Docker桌面等桌面系统上，这些桌面安装中包含Docker Compose。")]),s._v(" "),a("p",[s._v("在Linux系统上，首先按照“获取Docker”页面上的说明为您的操作系统安装"),a("a",{attrs:{href:"https://docs.docker.com/engine/install/#server",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker Engine"),a("OutboundLink")],1),s._v("，然后返回此处以获取有关在Linux系统上安装Compose的说明。")]),s._v(" "),a("p",[s._v("要以非root用户身份运行Compose，请参阅以"),a("a",{attrs:{href:"https://docs.docker.com/engine/install/linux-postinstall/",target:"_blank",rel:"noopener noreferrer"}},[s._v("非root用户身份管理Docker"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("h2",{attrs:{id:"_2-安装docker-compose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装docker-compose"}},[s._v("#")]),s._v(" 2.安装docker compose")]),s._v(" "),a("p",[s._v("请按照以下说明在Mac，Windows，Windows Server 2016或Linux系统上安装Compose，或查找其他替代方法，例如使用pip Python软件包管理器或将Compose作为容器安装。")]),s._v(" "),a("p",[s._v("安装其他版本")]),s._v(" "),a("p",[s._v("以下说明概述了Compose当前稳定版本（v1.26.0）的安装。 要安装其他版本的Compose，请用所需的版本号替换给定的发行号。 还列出了Compose版本，可以在"),a("a",{attrs:{href:"https://github.com/docker/compose/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("GitHub上的Compose存储库版本页面"),a("OutboundLink")],1),s._v("上直接下载。")]),s._v(" "),a("h2",{attrs:{id:"_3-在linux系统上安装compose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-在linux系统上安装compose"}},[s._v("#")]),s._v(" 3.在Linux系统上安装Compose")]),s._v(" "),a("p",[s._v("在Linux上，您可以从"),a("a",{attrs:{href:"https://github.com/docker/compose/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("GitHub上的Compose存储库发行页面"),a("OutboundLink")],1),s._v("下载Docker Compose二进制文件。 按照链接中的说明进行操作，其中包括在终端中运行curl命令以下载二进制文件。 这些分步说明也包含在下面。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -L "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://github.com/docker/compose/releases/download/1.26.0/docker-compose-'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -s"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("-"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -m"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v(" -o /usr/local/bin/docker-compose\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/local/bin/docker-compose\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("验证是否安装成功")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker-compose -v\ndocker-compose version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.26")]),s._v(".0, build d4451659\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"_4-在linux-系统上卸载compose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-在linux-系统上卸载compose"}},[s._v("#")]),s._v(" 4.在linux 系统上卸载compose")]),s._v(" "),a("p",[s._v("如果使用curl来卸载Docker Compose，请执行以下操作：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" /usr/local/bin/docker-compose\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://docs.docker.com/compose/install/",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考官方安装文档"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"_5-使用docker-compose的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-使用docker-compose的使用"}},[s._v("#")]),s._v(" 5.使用docker compose的使用")]),s._v(" "),a("p",[s._v("Docker compose的使用非常类似于docker命令的使用，但是需要注意的是大部分的compose命令都需要到docker-compose.yml文件所在的目录下才能执行。")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("up")]),s._v(": 启动服务")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker-compose up -d \n如果配置文件名不是docker-compse.yaml 的话,需要加-f 指定，\n例如 "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v(" docker-compose -f database-docker-compose.yaml -d "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("，\n也可以指定配置文件的绝对路径, "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v(" docker-compose -f /root/database-docker-compose.yaml -d "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("down")]),s._v("：停止和删除容器、网络、卷、镜像。")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("ps")]),s._v("：列出所有运行容器")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker-compose "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("stop")]),s._v("：停止已运行的服务的容器")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker-compose stop redis\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("logs")]),s._v(" : 查看容器日志")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker-compose logs redis\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("p",[a("strong",[s._v("restart")]),s._v("：重启指定服务已存在的容器")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker-compose restart mysql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("kill")]),s._v("：通过发送 SIGKILL 信号来停止指定服务的容器")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker-compose "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" redis\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("rm")]),s._v("：删除指定服务的容器,删除已停止的服务容器,没有停止的删除不了")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker-compose "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" redis\n// 如果加上-s 的话,那么会先将服务进行停止,然后询问你是否删除\ndocker-compose "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -s mysql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("up")]),s._v(" ：停止容器并删除创建的容器，网络，卷和映像")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker-compose down \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("config")]),s._v(" ：命令可以打印配置文件的内容和service名称以及volumes信息")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker-compose config --services\ndocker-compose config\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("exec")]),s._v(" ：在运行的容器中执行任何命令")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker-compose exec redis env\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("unpause")]),s._v(" ：将暂停的容器进行恢复")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker-compose unpause redis\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("pause")]),s._v("：暂停正在运行的容器")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker-compose pause redis\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("port")]),s._v("：查看端口映射关系")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker-compose port --help\ndocker-compose mysql "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("top")]),s._v("：显示正在运行的进程。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker-compose top\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("build")]),s._v("：构建或者重新构建服务")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker-compose build\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("pull")]),s._v(" ：下载服务镜像")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker-compose pull \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);